# 가상 메모리 관리

## 요구 페이징

프로세스가 필요로 하는 데이터를 언제 메모리로 가져올지 결정하는 것은 가져오기(fetch) 정책이다. 프로세스가 요청할 때 가져오는 것이 일반적. 이를 요구 페이징(demand paging)

### 요구페이징 개요

프로세스를 실행할 때, 운영체제는 필요한 모듈만 메모리에 올려 실행하고 나머지는 필요하다고 판단될 때 메모리로 불러온다. ㅣㅇ는

- 메모리를 효율적으로 관리하기 위해서. 메모리가 꽉 찰수록 관리하기 어렵기 때문
- 응답 속도 향상을 위해. 용량이 큰 프로세스를 전부 메모리로 가져와 실행하면 응답이 늦어질 수 있다.

프로그램의 일부만 실행하고, 사용자가 **특정 기능을 요구할 때 해당 모듈을 메모리에 올리면(요구 페이징)**

- 메모리의 절약
- 메모리의 효율적 관리
- 프로세스의 응답 속도 향상

**미리 가져오기**는 요구페이징과 반대. 앞으로 쓰일 것이라 예상되는 페이지를 미리 가져오는 방식. 캐시.

### 페이지 테이블 엔트리(Page Table Entry, PTE)의 구조

가상 메모리의 크기 = 물리 메모리 + 스왑 영역(하드 디스크에 존재. but 메모리 관리자가 관리)

가상 메모리 시스템에서 사용자의 프로세스는 물리 메모리 또는 스왑 영역에 있다. 프로세스가 스왑영역에 있는 경우

- 요구 페이징으로 인해 첨부터 물리 메모리에 올라가지 못한 경우
- 메모리가 꽉 차서 스왑 영역으로 옮겨진 경우

둘 다 페이지 테이블에는 페이지가 메모리에 있는지, 스왑 영역에 있는지 표시해야 하는데, **유효 비트**를 사용한다.

PTE는 페이지 테이블의 한 행. 페이지 번호(테이블 인덱스), 플래그 비트, 프레임 번호로 구성

![pte](./images/09/pte.png) 

a = access bit	m = modified bit	v = valid bit	r = read	w = write	x = excute

